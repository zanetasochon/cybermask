(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var n=e.i(43476),a=e.i(71645);let t=({config:e,onChange:a})=>{let t=n=>{a({...e,fields:{...e.fields,[n]:!e.fields[n]}})},i=n=>{let t=n.target.value;a({...e,mode:t})};return(0,n.jsxs)("aside",{style:{padding:16,borderRadius:12,border:"1px solid #27272A",background:"rgba(15,23,42,0.9)",marginBottom:16},children:[(0,n.jsx)("h2",{style:{fontSize:18,marginBottom:8},children:"Ustawienia cenzury"}),(0,n.jsx)("p",{style:{fontSize:12,color:"#9CA3AF",marginBottom:12},children:"Wybierz, jakie typy danych mają zostać wykryte i ocenzurowane. W wersji desktopowej wykrywanie będzie realizowane przez lokalny model językowy (LLM) i OCR."}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:4,marginBottom:12,fontSize:13},children:[(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.firstName,onChange:()=>t("firstName")}),(0,n.jsx)("span",{children:"Imiona"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.lastName,onChange:()=>t("lastName")}),(0,n.jsx)("span",{children:"Nazwiska"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.fullName,onChange:()=>t("fullName")}),(0,n.jsx)("span",{children:"Imię i nazwisko"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.birthDate,onChange:()=>t("birthDate")}),(0,n.jsx)("span",{children:"Daty urodzenia"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.age,onChange:()=>t("age")}),(0,n.jsx)("span",{children:"Wiek"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.phoneNumber,onChange:()=>t("phoneNumber")}),(0,n.jsx)("span",{children:"Telefon"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.email,onChange:()=>t("email")}),(0,n.jsx)("span",{children:"E-mail"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.pesel,onChange:()=>t("pesel")}),(0,n.jsx)("span",{children:"PESEL"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.companyName,onChange:()=>t("companyName")}),(0,n.jsx)("span",{children:"Nazwa firmy"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.nip,onChange:()=>t("nip")}),(0,n.jsx)("span",{children:"NIP"})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.fields.address,onChange:()=>t("address")}),(0,n.jsx)("span",{children:"Adresy"})]})]}),(0,n.jsxs)("fieldset",{style:{border:"1px solid #27272A",borderRadius:10,padding:10,marginBottom:10},children:[(0,n.jsx)("legend",{style:{fontSize:12,padding:"0 4px",color:"#A1A1AA"},children:"Tryb cenzury"}),(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,marginBottom:4},children:[(0,n.jsx)("input",{type:"radio",name:"mode",value:"mask",checked:"mask"===e.mode,onChange:i}),(0,n.jsxs)("span",{children:["Zamazanie danych"," ",(0,n.jsx)("span",{style:{color:"#6B7280"},children:"(np. █████ lub \\[imię ocenzurowane\\])"})]})]}),(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13},children:[(0,n.jsx)("input",{type:"radio",name:"mode",value:"pseudonymize",checked:"pseudonymize"===e.mode,onChange:i}),(0,n.jsxs)("span",{children:["Zamiana na inne dane"," ",(0,n.jsx)("span",{style:{color:"#6B7280"},children:"(spójna pseudonimizacja w całym dokumencie)"})]})]})]}),"mask"===e.mode&&(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,fontSize:13},children:[(0,n.jsxs)("label",{children:["Znak maski:"," ",(0,n.jsx)("input",{type:"text",maxLength:1,value:e.maskChar,onChange:n=>a({...e,maskChar:n.target.value||"█"}),style:{width:32,marginLeft:4}})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.preserveLength,onChange:()=>a({...e,preserveLength:!e.preserveLength})}),(0,n.jsx)("span",{style:{color:"#9CA3AF"},children:"Zachowaj długość ciągu"})]})]}),(0,n.jsxs)("label",{style:{display:"flex",gap:6,alignItems:"center",fontSize:12,color:"#9CA3AF"},children:[(0,n.jsx)("input",{type:"checkbox",checked:e.consistentPseudonyms,onChange:()=>a({...e,consistentPseudonyms:!e.consistentPseudonyms})}),(0,n.jsx)("span",{children:"Ta sama osoba => ta sama zamiana w całym dokumencie"})]})]})},i=({originalText:e,result:a,isProcessing:t})=>(0,n.jsxs)("section",{style:{padding:16,borderRadius:12,border:"1px solid #27272A",background:"rgba(15,23,42,0.9)",minHeight:200},children:[(0,n.jsx)("h2",{style:{fontSize:18,marginBottom:8},children:"Podgląd ocenzurowanego dokumentu"}),(0,n.jsx)("p",{style:{fontSize:12,color:"#9CA3AF",marginBottom:8},children:"Po uruchomieniu cenzury zobaczysz tutaj porównanie treści przed i po przetworzeniu. W docelowej wersji desktopowej zamiast surowego tekstu będziesz widzieć podgląd PDF/DOCX z naniesionymi maskami."}),t&&(0,n.jsx)("p",{style:{fontSize:13,color:"#38BDF8",marginBottom:8},children:"Przetwarzanie dokumentu, analiza wzorców i nakładanie cenzury..."}),!a&&!e&&!t&&(0,n.jsx)("p",{style:{fontSize:13,color:"#6B7280"},children:"Wgraj dokument lub wklej treść, a następnie uruchom cenzurowanie, aby zobaczyć efekt."}),a&&(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:8,marginTop:8,fontSize:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{marginBottom:4,color:"#9CA3AF"},children:"Oryginał"}),(0,n.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",borderRadius:8,border:"1px solid #1F2933",background:"#020617",padding:8,maxHeight:260,overflow:"auto"},children:e})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{marginBottom:4,color:"#9CA3AF"},children:"Po cenzurze"}),(0,n.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",borderRadius:8,border:"1px solid #1F2933",background:"#020617",padding:8,maxHeight:260,overflow:"auto"},children:a.redactedText})]})]})]});async function s(e){let{fileName:n,originalText:a,config:t}=e,i=function(e,n){let a=[],t=(n,t,i)=>{let s;if(i)for(;null!==(s=n.exec(e));)a.push({value:s[0],start:s.index,end:s.index+s[0].length,type:t})};if(t(/\b\d{11}\b/g,"pesel",n.fields.pesel),t(/\b\d{10}\b/g,"nip",n.fields.nip),t(/\b(?:\+?\d{1,3}[- ]?)?(?:\d{3}[- ]?\d{3}[- ]?\d{3})\b/g,"phoneNumber",n.fields.phoneNumber),t(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"email",n.fields.email),t(/\b\d{1,3}\s*(?:lat|l\.)\b/gi,"age",n.fields.age),t(/\b\d{4}-\d{2}-\d{2}\b/g,"birthDate",n.fields.birthDate),n.fields.fullName||n.fields.firstName||n.fields.lastName){let t,i=/\b[A-ZĄĆĘŁŃÓŚŹŻ][a-ząćęłńóśźż]+(?:\s+[A-ZĄĆĘŁŃÓŚŹŻ][a-ząćęłńóśźż]+)+\b/g;for(;null!==(t=i.exec(e));){let e=t[0],i=e.split(/\s+/);if(n.fields.fullName)a.push({value:e,start:t.index,end:t.index+e.length,type:"fullName"});else if(n.fields.firstName&&a.push({value:i[0],start:t.index,end:t.index+i[0].length,type:"firstName"}),n.fields.lastName&&i.length>1){let n=i[i.length-1],s=t.index+e.length-n.length;a.push({value:n,start:s,end:s+n.length,type:"lastName"})}}}for(let e of n.fields.customPatterns||[])try{let n=RegExp(e,"g");t(n,"custom",!0)}catch{}return a.sort((e,n)=>e.start-n.start),a}(a,t),{redactedText:s,mapping:l}=function(e,n,a){if(0===n.length)return{redactedText:e,mapping:{}};let t=new Map,i=e=>a.preserveLength?a.maskChar.repeat(e.length):`[${e[0]?e[0]:""}… ocenzurowane]`,s=(e,n)=>{let i=a.consistentPseudonyms?`${n}:${e}`:e,s=t.get(i);if(s)return s;let l="fullName"===n||"firstName"===n||"lastName"===n?"Osoba":"companyName"===n?"Firma":"pesel"===n?"ID":"nip"===n?"NIP":"phoneNumber"===n?"Telefon":"email"===n?"Email":"Dane",r=`${l}_${t.size+1}`;return t.set(i,r),r},l="",r=0;for(let t of n){if(t.start<r)continue;l+=e.slice(r,t.start);let n=t.value;l+="mask"===a.mode?i(n):s(n,t.type),r=t.end}l+=e.slice(r);let o={};for(let[e,n]of t.entries())o[e]=n;return{redactedText:l,mapping:o}}(a,i,t);return{baseFileName:n.replace(/\.[^.]+$/,""),originalText:a,redactedText:s,entities:i,mapping:l}}async function l(e){return s(e)}function r(){let[e,s]=(0,a.useState)(null),[r,o]=(0,a.useState)(""),[d,c]=(0,a.useState)({fields:{firstName:!0,lastName:!0,fullName:!0,birthDate:!0,age:!1,phoneNumber:!0,email:!0,pesel:!0,companyName:!0,nip:!0,address:!1,customPatterns:[]},mode:"mask",maskChar:"█",preserveLength:!0,consistentPseudonyms:!0}),[p,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),y=async e=>{let n=e.target.files?.[0];n&&(s(n),h(null),x(null),"text/plain"===n.type?o(await n.text()):o("Wersja demonstracyjna: pełna obsługa PDF/DOC/DOCX z OCR będzie realizowana w warstwie desktopowej / backendowej.\nAktualnie możesz przetestować silnik cenzury na pliku .txt."))},f=async()=>{if(!r)return void x("Najpierw wgraj dokument lub wprowadź tekst.");m(!0),x(null);try{let n=await l({fileName:e?.name??"wklejony_tekst.txt",mimeType:e?.type??"text/plain",originalText:r,config:d});h(n)}catch(e){console.error(e),x("Wystąpił błąd podczas przetwarzania dokumentu.")}finally{m(!1)}};return(0,n.jsx)("main",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",padding:"32px 16px",boxSizing:"border-box"},children:(0,n.jsxs)("section",{style:{maxWidth:1200,width:"100%",display:"grid",gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 0.9fr)",gap:24},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{style:{fontSize:32,marginBottom:16},children:["CyberMask –"," ",(0,n.jsx)("span",{style:{color:"#22d3ee"},children:"dokumenty mówią mniej, niż wiedzą"})]}),(0,n.jsx)("p",{style:{marginBottom:24,maxWidth:640,color:"#A1A1AA"},children:"Wgraj dokument, wybierz jakie dane mają zniknąć (imiona, nazwiska, PESEL, NIP, numery telefonów itd.), a CyberMask zadba o spójną cenzurę i przygotuje materiał do bezpiecznego udostępnienia – zachowując prawdę, ale nie zdradzając człowieka."}),(0,n.jsxs)("div",{style:{marginBottom:16,padding:16,borderRadius:12,border:"1px solid #27272A",background:"rgba(15,23,42,0.85)"},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:14,color:"#E4E4E7"},children:"Wgraj dokument (.txt, docx, pdf)"}),(0,n.jsx)("input",{type:"file",accept:".txt,.pdf,.doc,.docx",onChange:y}),(0,n.jsx)("p",{style:{marginTop:8,fontSize:12,color:"#71717A"},children:"Wersja webowa służy jako prototyp silnika cenzury. W trybie desktopowym dokumenty pozostają lokalnie, a OCR i LLM działają offline."})]}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:14,color:"#E4E4E7"},children:"Podgląd surowego tekstu"}),(0,n.jsx)("textarea",{value:r,onChange:e=>o(e.target.value),placeholder:"Możesz też wkleić tutaj treść dokumentu...",style:{width:"100%",minHeight:200,borderRadius:12,border:"1px solid #27272A",background:"#020617",color:"#F4F4F5",padding:12,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco",fontSize:13,resize:"vertical"}})]}),(0,n.jsx)("button",{type:"button",onClick:f,disabled:p,style:{padding:"10px 20px",borderRadius:999,border:"none",background:"linear-gradient(135deg, #22c55e 0%, #22d3ee 45%, #4f46e5 100%)",color:"#020617",fontWeight:600,cursor:p?"wait":"pointer",opacity:p?.7:1},children:p?"Cenzurowanie...":"Ocenzuruj dokument"}),g&&(0,n.jsx)("p",{style:{marginTop:12,color:"#f97373",fontSize:14},children:g}),u&&(0,n.jsx)("button",{type:"button",onClick:()=>{if(!u)return;let e=new Blob([u.redactedText],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=`${u.baseFileName}_ocenzurowany.txt`,a.click(),URL.revokeObjectURL(n)},style:{marginTop:16,padding:"8px 18px",borderRadius:999,border:"1px solid #4b5563",background:"transparent",color:"#E5E7EB",fontSize:14,cursor:"pointer"},children:"Pobierz ocenzurowany plik (.txt)"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(t,{config:d,onChange:c}),(0,n.jsx)(i,{originalText:r,result:u,isProcessing:p})]})]})})}e.s(["default",()=>r],31713)}]);